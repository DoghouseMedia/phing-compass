<?xml version="1.0" encoding="UTF-8"?>

<project name="compass" default="compass:compile">

  <!-- ## Properties -->

  <property name="compass.themedir" value="" />

  <!-- ## Targets -->

  <target name="compass:compile"
          description="Compiles Sass files through bundler."
          depends="compass:clean">
    <fail unless="compass.themedir"
          message="Please provide a compass.themedir property." />

    <exec command="bundle exec compass compile -e production --force"
          dir="${compass.themedir}"
          passthru="true"
          logoutput="true"
          checkreturn="true" />
  </target>

  <target name="compass:clean"
          description="Deletes old Sass files through bundler.">
    <fail unless="compass.themedir"
          message="Please provide a compass.themedir property." />

    <exec command="bundle exec compass clean"
          dir="${compass.themedir}"
          passthru="true"
          logoutput="true"
          checkreturn="true" />
  </target>

  <target name="compass:watch"
          description="Watches Sass files for changes and compiles them through bundler.">
    <fail unless="compass.themedir"
          message="Please provide a compass.themedir property." />

    <exec command="bundle exec compass watch -e development"
          dir="${compass.themedir}"
          passthru="true"
          logoutput="true"
          checkreturn="true" />
  </target>

</project>
